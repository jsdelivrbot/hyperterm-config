{"version":3,"sources":["../../../src/lib/getCommands/backup.js"],"names":["files","restoreFile","restore","backupFile","backup","repoPromise","remoteUrl","copyAsync","clobber","dirs","repo","addRemote","undefined","fetch","add","commit","Date","push","then","resolve"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;;;oCAGEA,K;IACWC,W,gBAATC,O;IACQC,U,gBAARC,M;;;wEAIW;AAAA,QAASC,WAAT,SAASA,WAAT;AAAA,QAAsBC,SAAtB,SAAsBA,SAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACP,aAAGC,SAAH,CAAaN,WAAb,EAA0BE,UAA1B,EAAsC,EAAEK,SAAS,IAAX,EAAtC,CADO;;AAAA;AAAA;AAAA,mBAEPH,WAFO;;AAAA;AAAA;AAAA,mBAGP,sBACJ,mBAAW;AACT,uCAAU,iBAAMI,IAAN,CAAWC,IAArB,EACGC,SADH,CAEI,QAFJ,EAGIL,SAHJ,EAII;AAAA,uBAAMM,SAAN;AAAA,eAJJ;;AAOA,uCAAU,iBAAMH,IAAN,CAAWC,IAArB,EACGG,KADH,GAEGC,GAFH,CAEO,WAFP,EAGGC,MAHH,MAGa,IAAIC,IAAJ,EAHb,EAIGC,IAJH,CAIQ,QAJR,EAIkB,QAJlB,EAKGC,IALH,CAKQC,OALR;AAMD,aAfG,CAHO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","file":"backup.js","sourcesContent":["import simpleGit from 'simple-git';\nimport { paths } from '../../constants';\nimport fs from '../fs';\n\nconst {\n  files: {\n    restore: restoreFile,\n    backup: backupFile,\n  },\n} = paths;\n\nexport default async ({ repoPromise, remoteUrl }) => {\n  await fs.copyAsync(restoreFile, backupFile, { clobber: true });\n  await repoPromise;\n  await new Promise(\n    resolve => {\n      simpleGit(paths.dirs.repo)\n        .addRemote(\n          'origin',\n          remoteUrl,\n          () => undefined,\n        );\n\n      simpleGit(paths.dirs.repo)\n        .fetch()\n        .add('.hyper.js')\n        .commit(`${new Date()}`)\n        .push('origin', 'master')\n        .then(resolve);\n    },\n  );\n};\n"]}